<script setup lang="ts">
import { reactive, ref } from 'vue'
import CaseCard from '@/components/CaseCard.vue'

const uploadUrl: any = ref(null)
uploadUrl.value = 'http://192.168.1.207:3976/upload'

//è¯´æ˜éƒ¨åˆ†
let datas = [
  {
    title: 'æ–‡ä»¶ä¸Šä¼ ',
    note: 'å…¶ä»–ç±»å‹æ–‡ä»¶ä¸Šä¼ åŸºæœ¬ç”¨æ³•ã€‚',
    code: `/* js æ¨¡å—*/
const handleSuccess = (e: any, fileList: any) => {
  console.log('ğŸš€ ~ file: upload.vue:94 ~ handleSuccess ~ fileList:', fileList)
}
const handleDelete = (fileList: any) => {
  console.log('ğŸš€ ~ file: upload.vue:97 ~ handleDelete ~ fileList:', fileList)
}
const handleError = (err: any) => {
  console.log('ğŸš€ ~ file: upload.vue:97 ~ handleError ~ err:', err)
}
/* template */
<upload
  accept="*"
  :uploadUrl="uploadUrl"
  :multiple="true"
  :fileList="data[0].fileList"
  @handleSuccess="handleSuccess"
  @handleDelete="handleDelete"
  @handleError="handleError"
></upload>
        `,
  },
  {
    title: 'å•æ–‡ä»¶ä¸Šä¼ ',
    note: 'é€šè¿‡multipleå‚æ•°æ§åˆ¶',
    code: `       <upload
          accept="*"
          :uploadUrl="uploadUrl"
          :multiple="false"
          @handleSuccess="handleSuccess"
          @handleDelete="handleDelete"
          @handleError="handleError"
      ></upload>`,
  },
  {
    title: 'å›¾ç‰‡æ–‡ä»¶ä¸Šä¼ ',
    note: 'è‹¥æ¥å—å‚æ•°ä¸ºimagesï¼Œå³ä»…æ¥å—å›¾ç‰‡æ–‡ä»¶ï¼Œå°†ç”¨å›¾ç‰‡UIè¿›è¡Œæ–‡ä»¶äº¤äº’',
    code: `      <upload
          accept="image/*"
          :uploadUrl="uploadUrl"
          :multiple="true"
          @handleSuccess="handleSuccess"
          @handleDelete="handleDelete"
          @handleError="handleError"
        ></upload>`,
  },
  {
    title: 'å•å¼ æ–‡ä»¶ä¸Šä¼ ',
    note: 'é€šè¿‡multipleå‚æ•°æ§åˆ¶',
    code: `       <upload
          accept="image/*"
          :uploadUrl="uploadUrl"
          :multiple="false"
          :file-list="data[0].imageList"
          @handleSuccess="handleSuccess"
          @handleDelete="handleDelete"
          @handleError="handleError"
        ></upload>`,
  },
]

//apiéƒ¨åˆ†
const columns = [
  {
    title: 'å‚æ•°å',
    dataIndex: 'name',
    light: false,
  },
  {
    title: 'æè¿°',
    dataIndex: 'expl',
    light: false,
  },
  {
    title: 'ç±»å‹',
    dataIndex: 'type',
    light: true,
  },
  {
    title: 'é»˜è®¤å€¼',
    dataIndex: 'normal',
    light: false,
  },
]
const data = reactive([
  {
    key: '1',
    name: 'accept',
    expl: 'æ¥æ”¶æ–‡ä»¶ç±»å‹',
    type: `string`,
    normal: '*',
  },
  {
    key: '2',
    name: 'mutiple',
    expl: 'æ˜¯å¦ä¸Šä¼ å¤šä¸ªæ–‡ä»¶',
    type: `boolean`,
    normal: 'true',
  },
  {
    key: '3',
    name: 'uploadUrl',
    expl: 'æ–‡ä»¶æœåŠ¡url',
    type: `string`,
    normal: '-',
  },
  {
    key: '4',
    name: 'fileList',
    expl: 'å›æ˜¾æ–‡ä»¶åˆ—è¡¨',
    type: `Array<UploadFile>`,
    normal: '{}',
  },
])
const mokeFiles = [
  {
    fileList: [
      {
        name: 'food.jpeg',
        url: 'https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100',
      },
      {
        name: 'food2.jpeg',
        url: 'https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100',
      },
    ],
    imageList: [
      {
        name: 'food.jpeg',
        url: 'https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100',
      },
    ],
  },
]
const columns1 = [
  {
    title: 'äº‹ä»¶å',
    dataIndex: 'name',
    light: false,
  },
  {
    title: 'æè¿°',
    dataIndex: 'expl',
    light: false,
  },
  {
    title: 'å‚æ•°',
    dataIndex: 'type',
    light: true,
  },
]
const data1 = reactive([
  {
    key: '1',
    name: 'handleSuccess',
    expl: 'æ–‡ä»¶ä¸Šä¼ æˆåŠŸæ—¶è§¦å‘',
    type: `res:{æœåŠ¡å™¨è¿”å›ç»“æœ},fileList:{å½“å‰æ–‡ä»¶åˆ—è¡¨`,
  },
  {
    key: '2',
    name: 'handleDelete',
    expl: 'æ–‡ä»¶åˆ é™¤æ—¶è§¦å‘',
    type: `res:{æœåŠ¡å™¨è¿”å›ç»“æœ},fileList:{å½“å‰æ–‡ä»¶åˆ—è¡¨`,
  },
  {
    key: '3',
    name: 'handleError',
    expl: 'æ–‡ä»¶ä¸Šä¼ å¤±è´¥æ—¶è§¦å‘',
    type: `err:{æœåŠ¡å™¨è¿”å›ç»“æœ`,
  },
])

//å¤é€‰æ¡†å†…å®¹
const yike = ref(3.5)
const handleSuccess = (e: any, fileList: any) => {
  console.log('ğŸš€ ~ file: upload.vue:94 ~ handleSuccess ~ fileList:', fileList)
}
const handleDelete = (fileList: any) => {
  console.log('ğŸš€ ~ file: upload.vue:97 ~ handleDelete ~ fileList:', fileList)
}
const handleError = (err: any) => {
  console.log('ğŸš€ ~ file: upload.vue:97 ~ handleError ~ err:', err)
}
</script>

<template>
  <div class="icons">
    <div class="top-title">
      <Title :level="2">Upload æ–‡ä»¶ä¸Šä¼ </Title>
      <Paragraph>ç”¨äºå¸¸è§„æ–‡ä»¶æˆ–å›¾ç‰‡æ–‡ä»¶çš„ä¸Šä¼ ã€‚</Paragraph>
      <CaseCard
        :title="datas[0].title"
        :note="datas[0].note"
        :code="datas[0].code"
      >
        <upload
          accept="*"
          :uploadUrl="uploadUrl"
          :multiple="true"
          :fileList="mokeFiles[0].fileList"
          @handleSuccess="handleSuccess"
          @handleDelete="handleDelete"
          @handleError="handleError"
        ></upload>
      </CaseCard>
      <CaseCard
        :title="datas[1].title"
        :note="datas[1].note"
        :code="datas[1].code"
      >
        <upload
          accept="*"
          :uploadUrl="uploadUrl"
          :multiple="false"
          @handleSuccess="handleSuccess"
          @handleDelete="handleDelete"
          @handleError="handleError"
        ></upload>
      </CaseCard>
      <CaseCard
        :title="datas[2].title"
        :note="datas[2].note"
        :code="datas[2].code"
      >
        <upload
          accept="image/*"
          :uploadUrl="uploadUrl"
          :multiple="true"
          @handleSuccess="handleSuccess"
          @handleDelete="handleDelete"
          @handleError="handleError"
        ></upload>
      </CaseCard>
      <CaseCard
        :title="datas[3].title"
        :note="datas[3].note"
        :code="datas[3].code"
      >
        <upload
          accept="image/*"
          :uploadUrl="uploadUrl"
          :multiple="false"
          :file-list="mokeFiles[0].imageList"
          @handleSuccess="handleSuccess"
          @handleDelete="handleDelete"
          @handleError="handleError"
        ></upload>
      </CaseCard>
    </div>
    <div class="api">
      <Title :level="3">API</Title>
      <Title :level="4">Textarea . Props</Title>
      <div class="unit-table">
        <Table :data="data" :columns="columns"></Table>
      </div>
      <Title :level="4">Textarea . Events</Title>
      <div class="unit-table">
        <Table :data="data1" :columns="columns1"></Table>
      </div>
    </div>
  </div>
</template>
<style lang="less" scoped>
.unit-table {
  width: 100%;
  // overflow: hidden;
  overflow-x: auto;
}
</style>
