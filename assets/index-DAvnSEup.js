import{d as L,a0 as O,r as g,a1 as K,c as w,Q as P,a2 as Q,o as X,e as j,w as D,U as q,V as G,X as n,b as J,i as I,m as Y,n as W,al as Z,x as _}from"./index-Du6vcQYg.js";import{Y as ee}from"./index-BuhTk0dz.js";import{I as te}from"./index-W29o9OBC.js";import{I as ae}from"./index-BlBsTOom.js";import{u as ne}from"./use-form-item-BrR5f3U-.js";const F=(s,i,u)=>{if(Number.isInteger(s)&&Number.isInteger(i)){const a=s+i;if(u===0)return a}const r=s.toString().split(".")[1]??"",l=i.toString().split(".")[1]??"",m=10**Math.max(r.length??0,l.length??0);return(s*m+i*m)/m},se=(s,i)=>{if(!s||Number.isNaN(s))return 0;const u=s.toString().split("."),r=u[0];let l=u[1]??"";return l.length>i?(l=l.slice(0,i),+`${r}.${l}`):s},oe=/[-]?(\d*\.\d+|\d+\.\d|\d+)/,ue=250,le=60,ie=L({name:"YkInputNumber",__name:"input-number",props:{modelValue:{},max:{default:1/0},min:{default:-1/0},step:{default:1},precision:{default:0},size:{default:"l"},disabled:{type:Boolean,default:!1},message:{},controls:{type:Boolean,default:!0},formatter:{type:Function,default:s=>s}},emits:["update:modelValue","increase","decrease"],setup(s,{emit:i}){const u=s,r=O("input-number"),l=i,v=g(!1),m=g(!1),a=K(u),t=g(0),B=g(),{disabled:R,size:A}=a,{mergedSize:f,mergedDisabled:M}=ne({disabled:R,size:A});let d;const c=w(()=>{let e=a.precision.value;return(!Number.isInteger(e)||e>20)&&(e=0),e}),h=()=>u.max===1/0&&u.min===-1/0?0:u.min;let y,V;const S=e=>{if(u.disabled)return;const o=e===1?k:z;window.addEventListener("mouseup",p),y=window.setTimeout(()=>{V=window.setInterval(()=>{o()},le)},ue)},p=()=>{y&&clearTimeout(y),V&&clearInterval(V),window.removeEventListener("mouseup",p)},x=w(()=>t.value<=a.min.value),N=w(()=>t.value>=a.max.value);P(()=>{var e;t.value=((e=a.modelValue)==null?void 0:e.value)??h()});const k=()=>{if(N.value){p();return}d=F(t.value,a.step.value,c.value),t.value=d>=a.max.value?a.max.value:d,b(),l("increase")},z=()=>{if(x.value){p();return}d=F(t.value,-a.step.value,c.value),t.value=d<=a.min.value?a.min.value:d,b(),l("decrease")},H=e=>{e.key==="ArrowUp"&&k(),e.key==="ArrowDown"&&z()},T=()=>{b()},U=()=>{m.value=!0},E=e=>{var o;t.value=e?Number((e.match(oe)??["0"])[0]):0,c.value===0?t.value=Math.trunc(t.value):t.value=se(t.value,c.value),N.value&&(t.value=a.max.value),x.value&&(t.value=a.min.value),b(),m.value=!1,(o=B.value)==null||o.setValue($.value)},b=()=>{l("update:modelValue",t.value)},$=w(()=>{const e=t.value.toFixed(c.value);return m.value?e:a.formatter.value(e)??e});return Q(()=>u.modelValue,e=>{t.value=e??h()}),(e,o)=>(X(),j(n(ee),Z({ref_key:"inputRef",ref:B,"model-value":$.value,disabled:n(M),size:n(f),class:n(r)()},e.$attrs,{onFocus:U,onChange:T,onBlur:E,onHoverin:o[2]||(o[2]=C=>v.value=!0),onHoverout:o[3]||(o[3]=C=>v.value=!1),onKeydown:H}),{suffix:D(()=>[q(J("div",{class:W([n(r)("buttons"),n(r)([n(f)])])},[I(n(Y),{disabled:N.value,size:n(f),type:"secondary",onClick:k,onMousedown:o[0]||(o[0]=C=>S(1))},{default:D(()=>[I(n(te))]),_:1},8,["disabled","size"]),I(n(Y),{disabled:x.value,size:n(f),type:"secondary",onClick:z,onMousedown:o[1]||(o[1]=C=>S(0))},{default:D(()=>[I(n(ae))]),_:1},8,["disabled","size"])],2),[[G,e.controls&&!n(M)&&v.value]])]),_:1},16,["model-value","disabled","size","class"]))}}),fe=_(ie);export{fe as Y};
