import{d as w,a0 as J,r as y,af as K,ag as O,ah as Q,a2 as k,ai as X,R as z,c as $,S as Z,o as p,a as D,b as t,V as tt,n as P,W as T,v as S,x as et,k as g,e as C,w as o,i as a,j as s,m as A,aj as I,ak as ot,g as b}from"./index-f159d33e.js";function M(u){return u===window}function L(u){return M(u)?{top:0,bottom:window.innerHeight}:u.getBoundingClientRect()}const nt=w({name:"YkAffix",__name:"affix",props:{position:{default:"top"},target:{},offset:{default:0},zIndex:{default:100}},emits:["change"],setup(u,{expose:i,emit:e}){const l=J("affix"),n=u,f=e,v=y(),r=y(),c=y({top:0,bottom:0}),d=y(!1),{height:E}=K(),{top:H,bottom:U,update:h,height:V,width:W}=O(v,{windowScroll:!1});Q(B),k(()=>E.value,()=>{M(r.value)&&(c.value.bottom=E.value),B()}),k(()=>d.value,()=>f("change",d.value)),k(()=>n.target,()=>R()),X(r,"scroll",F),i({updatePosition:F}),z(()=>{R()});const Y=$(()=>{if(!d.value)return{};const m=n.position==="bottom",_=n.position==="top";return{bottom:m?`${E.value-c.value.bottom+n.offset}px`:"",top:_?`${c.value.top+n.offset}px`:"",zIndex:n.zIndex}}),N=$(()=>({height:d.value?`${V.value}px`:"",width:d.value?`${W.value}px`:""}));function F(){c.value=L(r.value),h()}async function R(){n.target?typeof n.target=="string"?r.value=document.querySelector(n.target)??window:r.value=n.target:r.value=window||document.documentElement,await Z(),c.value=L(r.value),h()}function B(){const{position:m,offset:_}=n,j=m==="bottom",{top:q,bottom:G}=c.value;d.value=j?G-_<=U.value:H.value-q<=_}return(m,_)=>(p(),D("div",{ref_key:"rootRef",ref:v,class:P([T(l)()]),style:S(N.value)},[t("div",{class:P([T(l)("postion",{active:d.value})]),style:S(Y.value)},[tt(m.$slots,"default")],6)],6))}}),lt=et(nt),x=lt,st={};function at(u,i){const e=A,l=x;return p(),C(l,null,{default:o(()=>[a(e,null,{default:o(()=>i[0]||(i[0]=[s("Affix Top")])),_:1})]),_:1})}const it=g(st,[["render",at]]),ut={},ft={style:{height:"600px"}};function rt(u,i){const e=A,l=x;return p(),D("div",ft,[a(l,{offset:80},{default:o(()=>[a(e,null,{default:o(()=>i[0]||(i[0]=[s("offset top 80px")])),_:1})]),_:1})])}const dt=g(ut,[["render",rt]]),pt={};function ct(u,i){const e=A,l=x;return p(),C(l,{offset:120,position:"bottom"},{default:o(()=>[a(e,null,{default:o(()=>i[0]||(i[0]=[s("offset bottom 120px")])),_:1})]),_:1})}const mt=g(pt,[["render",ct]]),_t=w({__name:"affix-change",setup(u){const i=e=>{console.log(e)};return(e,l)=>{const n=A,f=x;return p(),C(f,{offset:80,position:"bottom",onChange:i},{default:o(()=>[a(n,null,{default:o(()=>l[0]||(l[0]=[s("offset bottom 80px")])),_:1})]),_:1})}}}),At={class:"yk-scroll-wrapper"},xt=w({__name:"affix-container",setup(u){const i=I(),e=I();return z(()=>{var l;window.addEventListener("scroll",(l=e.value)==null?void 0:l.updatePosition,!0)}),ot(()=>{var l;window.removeEventListener("scroll",(l=e.value)==null?void 0:l.updatePosition,!0)}),(l,n)=>{const f=A,v=x;return p(),D("div",{ref_key:"targetRef",ref:i,class:"yk-wrapper"},[t("div",At,[a(v,{ref_key:"affixRef",ref:e,offset:30,target:i.value,style:{"margin-top":"60px"}},{default:o(()=>[a(f,null,{default:o(()=>n[0]||(n[0]=[s("Affix Top in container")])),_:1})]),_:1},8,["target"])])],512)}}});const vt=g(xt,[["__scopeId","data-v-afc35d13"]]),gt={__name:"doc",setup(u){return(i,e)=>{const l=b("yk-title"),n=b("yk-snippet"),f=b("DocPage");return p(),C(f,null,{default:o(()=>[a(l,{level:2,id:"YkAffix-固钉"},{default:o(()=>e[0]||(e[0]=[s("YkAffix 固钉")])),_:1}),a(n,{title:"基本用法",code:"%3Ctemplate%3E%0A%20%20%3Cyk-affix%3E%0A%20%20%20%20%3Cyk-button%3EAffix%20Top%3C%2Fyk-button%3E%0A%20%20%3C%2Fyk-affix%3E%0A%3C%2Ftemplate%3E%0A"},{demo:o(()=>[a(it)]),desc:o(()=>e[1]||(e[1]=[t("p",null,"基本用法，不设置固定位置时，当页面滚动元素不可见时，元素固定在页面最顶部。",-1)])),_:1}),a(n,{title:"顶部固定",code:"%3Ctemplate%3E%0A%20%20%3Cdiv%20style%3D%22height%3A%20600px%22%3E%0A%20%20%20%20%3Cyk-affix%20%3Aoffset%3D%2280%22%3E%0A%20%20%20%20%20%20%3Cyk-button%3Eoffset%20top%2080px%3C%2Fyk-button%3E%0A%20%20%20%20%3C%2Fyk-affix%3E%0A%20%20%3C%2Fdiv%3E%0A%3C%2Ftemplate%3E%0A"},{demo:o(()=>[a(dt)]),desc:o(()=>e[2]||(e[2]=[t("p",null,"当页面滚动或浏览器尺寸改变时，元素向上滚动到距顶部一定距离时固定。",-1)])),_:1}),a(n,{title:"底部固定",code:"%3Ctemplate%3E%0A%20%20%3Cyk-affix%20%3Aoffset%3D%22120%22%20position%3D%22bottom%22%3E%0A%20%20%20%20%3Cyk-button%3Eoffset%20bottom%20120px%3C%2Fyk-button%3E%0A%20%20%3C%2Fyk-affix%3E%0A%3C%2Ftemplate%3E%0A"},{demo:o(()=>[a(mt)]),desc:o(()=>e[3]||(e[3]=[t("p",null,[s("通过设置"),t("code",null,"position"),s("属性为"),t("code",null,"bottom"),s("时，当页面滚动或浏览器尺寸改变时，元素向下滚动到距底部一定距离时固定。")],-1)])),_:1}),a(n,{title:"固定状态改变回调",code:"%3Ctemplate%3E%0A%20%20%3Cyk-affix%20%3Aoffset%3D%2280%22%20position%3D%22bottom%22%20%40change%3D%22change%22%3E%0A%20%20%20%20%3Cyk-button%3Eoffset%20bottom%2080px%3C%2Fyk-button%3E%0A%20%20%3C%2Fyk-affix%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20lang%3D%22ts%22%20setup%3E%0Aconst%20change%20%3D%20(v%3A%20any)%20%3D%3E%20%7B%0A%20%20console.log(v)%0A%7D%0A%3C%2Fscript%3E%0A"},{demo:o(()=>[a(_t)]),desc:o(()=>e[4]||(e[4]=[t("p",null,[s("当元素"),t("code",null,"fixed"),s("状态改变回调时，触发"),t("code",null,"change"),s("事件")],-1)])),_:1}),a(n,{title:"指定容器滚动",code:"%3Ctemplate%3E%0A%20%20%3Cdiv%20ref%3D%22targetRef%22%20class%3D%22yk-wrapper%22%3E%0A%20%20%20%20%3Cdiv%20class%3D%22yk-scroll-wrapper%22%3E%0A%20%20%20%20%20%20%3Cyk-affix%0A%20%20%20%20%20%20%20%20ref%3D%22affixRef%22%0A%20%20%20%20%20%20%20%20%3Aoffset%3D%2230%22%0A%20%20%20%20%20%20%20%20%3Atarget%3D%22targetRef%22%0A%20%20%20%20%20%20%20%20style%3D%22margin-top%3A%2060px%22%0A%20%20%20%20%20%20%3E%0A%20%20%20%20%20%20%20%20%3Cyk-button%3EAffix%20Top%20in%20container%3C%2Fyk-button%3E%0A%20%20%20%20%20%20%3C%2Fyk-affix%3E%0A%20%20%20%20%3C%2Fdiv%3E%0A%20%20%3C%2Fdiv%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20lang%3D%22ts%22%20setup%3E%0Aimport%20%7B%20shallowRef%2C%20onMounted%2C%20onUnmounted%20%7D%20from%20'vue'%0Aconst%20targetRef%20%3D%20shallowRef%3CHTMLElement%3E()%0Aconst%20affixRef%20%3D%20shallowRef()%0AonMounted(()%20%3D%3E%20%7B%0A%20%20window.addEventListener('scroll'%2C%20affixRef.value%3F.updatePosition%2C%20true)%0A%7D)%0AonUnmounted(()%20%3D%3E%20%7B%0A%20%20window.removeEventListener('scroll'%2C%20affixRef.value%3F.updatePosition%2C%20true)%0A%7D)%0A%3C%2Fscript%3E%0A%3Cstyle%20scoped%3E%0A.yk-wrapper%20%7B%0A%20%20overflow%3A%20auto%3B%0A%20%20height%3A%20200px%3B%0A%7D%0A%0A.yk-scroll-wrapper%20%7B%0A%20%20overflow%3A%20hidden%3B%0A%20%20height%3A%20400px%3B%0A%20%20background-color%3A%20%23d4e1ff%3B%0A%7D%0A%3C%2Fstyle%3E%0A"},{demo:o(()=>[a(vt)]),desc:o(()=>e[5]||(e[5]=[t("p",null,[s("传入"),t("code",null,"target"),s("作为滚动容器。注意：当容器外部还有滚动元素时，可以主动监听外部滚动事件，调用"),t("code",null,"updatePosition"),s("方法去更新固钉位置。")],-1)])),_:1}),a(l,{level:3,id:"API"},{default:o(()=>e[6]||(e[6]=[s("API")])),_:1}),e[7]||(e[7]=t("p",null,[t("code",null,"<affix>"),s(" Props")],-1)),e[8]||(e[8]=t("div",{class:"table-container"},[t("table",null,[t("thead",null,[t("tr",null,[t("th",null,"参数名"),t("th",null,"描述"),t("th",null,"类型"),t("th",null,"默认值")])]),t("tbody",null,[t("tr",null,[t("td",null,"offset"),t("td",null,"偏移量"),t("td",null,"number"),t("td",null,"0")]),t("tr",null,[t("td",null,"position"),t("td",null,"偏移方向"),t("td",null,"'top'｜'bottom'"),t("td",null,"'top'")]),t("tr",null,[t("td",null,"target"),t("td",null,"滚动容器，默认是 window"),t("td",null,"string ｜ window ｜ HTMLElement"),t("td",null,"window")])])])],-1)),e[9]||(e[9]=t("p",null,[t("code",null,"<affix>"),s("Events")],-1)),e[10]||(e[10]=t("div",{class:"table-container"},[t("table",null,[t("thead",null,[t("tr",null,[t("th",null,"事件名"),t("th",null,"描述"),t("th",null,"参数")])]),t("tbody",null,[t("tr",null,[t("td",null,"change"),t("td",null,"元素固定状态改变时触发事件"),t("td",null,"fixed:boolean")])])])],-1)),e[11]||(e[11]=t("p",null,[t("code",null,"<affix>"),s("Methods")],-1)),e[12]||(e[12]=t("div",{class:"table-container"},[t("table",null,[t("thead",null,[t("tr",null,[t("th",null,"方法名"),t("th",null,"描述"),t("th",null,"参数"),t("th",null,"返回值")])]),t("tbody",null,[t("tr",null,[t("td",null,"updatePosition"),t("td",null,"用于主动更新位置"),t("td",null,"-"),t("td",null,"-")])])])],-1))]),_:1})}}};export{gt as default};
