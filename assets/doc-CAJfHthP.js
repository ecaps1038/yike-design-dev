import{d as w,a0 as X,r as y,ad as G,ae as J,af as K,a2 as k,ag as O,Q as z,c as $,R as Z,o as p,a as D,b as t,W as tt,n as P,X as T,v as S,x as et,_ as C,e as E,w as o,i as a,j as s,m as _,ah as I,ai as ot,g as b}from"./index-RXxV3lR3.js";function M(f){return f===window}function L(f){return M(f)?{top:0,bottom:window.innerHeight}:f.getBoundingClientRect()}const nt=w({name:"YkAffix",__name:"affix",props:{position:{default:"top"},target:{},offset:{default:0},zIndex:{default:100}},emits:["change"],setup(f,{expose:i,emit:e}){const l=X("affix"),n=f,u=e,v=y(),r=y(),c=y({top:0,bottom:0}),d=y(!1),{height:g}=G(),{top:H,bottom:Y,update:h,height:U,width:W}=J(v,{windowScroll:!1});K(R),k(()=>g.value,()=>{M(r.value)&&(c.value.bottom=g.value),R()}),k(()=>d.value,()=>u("change",d.value)),k(()=>n.target,()=>B()),O(r,"scroll",F),i({updatePosition:F}),z(()=>{B()});const N=$(()=>{if(!d.value)return{};const m=n.position==="bottom",A=n.position==="top";return{bottom:m?`${g.value-c.value.bottom+n.offset}px`:"",top:A?`${c.value.top+n.offset}px`:"",zIndex:n.zIndex}}),V=$(()=>({height:d.value?`${U.value}px`:"",width:d.value?`${W.value}px`:""}));function F(){c.value=L(r.value),h()}async function B(){n.target?typeof n.target=="string"?r.value=document.querySelector(n.target)??window:r.value=n.target:r.value=window||document.documentElement,await Z(),c.value=L(r.value),h()}function R(){const{position:m,offset:A}=n,j=m==="bottom",{top:q,bottom:Q}=c.value;d.value=j?Q-A<=Y.value:H.value-q<=A}return(m,A)=>(p(),D("div",{ref_key:"rootRef",ref:v,class:P([T(l)()]),style:S(V.value)},[t("div",{class:P([T(l)("postion",{active:d.value})]),style:S(N.value)},[tt(m.$slots,"default")],6)],6))}}),x=et(nt),lt={};function st(f,i){const e=_,l=x;return p(),E(l,null,{default:o(()=>[a(e,null,{default:o(()=>i[0]||(i[0]=[s("Affix Top")])),_:1})]),_:1})}const at=C(lt,[["render",st]]),it={},ft={style:{height:"600px"}};function ut(f,i){const e=_,l=x;return p(),D("div",ft,[a(l,{offset:80},{default:o(()=>[a(e,null,{default:o(()=>i[0]||(i[0]=[s("offset top 80px")])),_:1})]),_:1})])}const rt=C(it,[["render",ut]]),dt={};function pt(f,i){const e=_,l=x;return p(),E(l,{offset:120,position:"bottom"},{default:o(()=>[a(e,null,{default:o(()=>i[0]||(i[0]=[s("offset bottom 120px")])),_:1})]),_:1})}const ct=C(dt,[["render",pt]]),mt=w({__name:"affix-change",setup(f){const i=e=>{console.log(e)};return(e,l)=>{const n=_,u=x;return p(),E(u,{offset:80,position:"bottom",onChange:i},{default:o(()=>[a(n,null,{default:o(()=>l[0]||(l[0]=[s("offset bottom 80px")])),_:1})]),_:1})}}}),At={class:"yk-scroll-wrapper"},_t=w({__name:"affix-container",setup(f){const i=I(),e=I();return z(()=>{var l;window.addEventListener("scroll",(l=e.value)==null?void 0:l.updatePosition,!0)}),ot(()=>{var l;window.removeEventListener("scroll",(l=e.value)==null?void 0:l.updatePosition,!0)}),(l,n)=>{const u=_,v=x;return p(),D("div",{ref_key:"targetRef",ref:i,class:"yk-wrapper"},[t("div",At,[a(v,{ref_key:"affixRef",ref:e,offset:30,target:i.value,style:{"margin-top":"60px"}},{default:o(()=>[a(u,null,{default:o(()=>n[0]||(n[0]=[s("Affix Top in container")])),_:1})]),_:1},8,["target"])])],512)}}}),xt=C(_t,[["__scopeId","data-v-afc35d13"]]),yt={__name:"doc",setup(f){return(i,e)=>{const l=b("yk-title"),n=b("yk-snippet"),u=b("DocPage");return p(),E(u,null,{default:o(()=>[a(l,{level:2,id:"YkAffix-固钉"},{default:o(()=>e[0]||(e[0]=[s("YkAffix 固钉")])),_:1}),a(n,{title:"基本用法",code:"%3Ctemplate%3E%0A%20%20%3Cyk-affix%3E%0A%20%20%20%20%3Cyk-button%3EAffix%20Top%3C%2Fyk-button%3E%0A%20%20%3C%2Fyk-affix%3E%0A%3C%2Ftemplate%3E%0A"},{demo:o(()=>[a(at)]),desc:o(()=>e[1]||(e[1]=[t("p",null,"基本用法，不设置固定位置时，当页面滚动元素不可见时，元素固定在页面最顶部。",-1)])),_:1}),a(n,{title:"顶部固定",code:"%3Ctemplate%3E%0A%20%20%3Cdiv%20style%3D%22height%3A%20600px%22%3E%0A%20%20%20%20%3Cyk-affix%20%3Aoffset%3D%2280%22%3E%0A%20%20%20%20%20%20%3Cyk-button%3Eoffset%20top%2080px%3C%2Fyk-button%3E%0A%20%20%20%20%3C%2Fyk-affix%3E%0A%20%20%3C%2Fdiv%3E%0A%3C%2Ftemplate%3E%0A"},{demo:o(()=>[a(rt)]),desc:o(()=>e[2]||(e[2]=[t("p",null,"当页面滚动或浏览器尺寸改变时，元素向上滚动到距顶部一定距离时固定。",-1)])),_:1}),a(n,{title:"底部固定",code:"%3Ctemplate%3E%0A%20%20%3Cyk-affix%20%3Aoffset%3D%22120%22%20position%3D%22bottom%22%3E%0A%20%20%20%20%3Cyk-button%3Eoffset%20bottom%20120px%3C%2Fyk-button%3E%0A%20%20%3C%2Fyk-affix%3E%0A%3C%2Ftemplate%3E%0A"},{demo:o(()=>[a(ct)]),desc:o(()=>e[3]||(e[3]=[t("p",null,[s("通过设置"),t("code",null,"position"),s("属性为"),t("code",null,"bottom"),s("时，当页面滚动或浏览器尺寸改变时，元素向下滚动到距底部一定距离时固定。")],-1)])),_:1}),a(n,{title:"固定状态改变回调",code:"%3Ctemplate%3E%0A%20%20%3Cyk-affix%20%3Aoffset%3D%2280%22%20position%3D%22bottom%22%20%40change%3D%22change%22%3E%0A%20%20%20%20%3Cyk-button%3Eoffset%20bottom%2080px%3C%2Fyk-button%3E%0A%20%20%3C%2Fyk-affix%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20lang%3D%22ts%22%20setup%3E%0Aconst%20change%20%3D%20(v%3A%20any)%20%3D%3E%20%7B%0A%20%20console.log(v)%0A%7D%0A%3C%2Fscript%3E%0A"},{demo:o(()=>[a(mt)]),desc:o(()=>e[4]||(e[4]=[t("p",null,[s("当元素"),t("code",null,"fixed"),s("状态改变回调时，触发"),t("code",null,"change"),s("事件")],-1)])),_:1}),a(n,{title:"指定容器滚动",code:"%3Ctemplate%3E%0A%20%20%3Cdiv%20ref%3D%22targetRef%22%20class%3D%22yk-wrapper%22%3E%0A%20%20%20%20%3Cdiv%20class%3D%22yk-scroll-wrapper%22%3E%0A%20%20%20%20%20%20%3Cyk-affix%0A%20%20%20%20%20%20%20%20ref%3D%22affixRef%22%0A%20%20%20%20%20%20%20%20%3Aoffset%3D%2230%22%0A%20%20%20%20%20%20%20%20%3Atarget%3D%22targetRef%22%0A%20%20%20%20%20%20%20%20style%3D%22margin-top%3A%2060px%22%0A%20%20%20%20%20%20%3E%0A%20%20%20%20%20%20%20%20%3Cyk-button%3EAffix%20Top%20in%20container%3C%2Fyk-button%3E%0A%20%20%20%20%20%20%3C%2Fyk-affix%3E%0A%20%20%20%20%3C%2Fdiv%3E%0A%20%20%3C%2Fdiv%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20lang%3D%22ts%22%20setup%3E%0Aimport%20%7B%20shallowRef%2C%20onMounted%2C%20onUnmounted%20%7D%20from%20'vue'%0Aconst%20targetRef%20%3D%20shallowRef%3CHTMLElement%3E()%0Aconst%20affixRef%20%3D%20shallowRef()%0AonMounted(()%20%3D%3E%20%7B%0A%20%20window.addEventListener('scroll'%2C%20affixRef.value%3F.updatePosition%2C%20true)%0A%7D)%0AonUnmounted(()%20%3D%3E%20%7B%0A%20%20window.removeEventListener('scroll'%2C%20affixRef.value%3F.updatePosition%2C%20true)%0A%7D)%0A%3C%2Fscript%3E%0A%3Cstyle%20scoped%3E%0A.yk-wrapper%20%7B%0A%20%20overflow%3A%20auto%3B%0A%20%20height%3A%20200px%3B%0A%7D%0A%0A.yk-scroll-wrapper%20%7B%0A%20%20overflow%3A%20hidden%3B%0A%20%20height%3A%20400px%3B%0A%20%20background-color%3A%20%23d4e1ff%3B%0A%7D%0A%3C%2Fstyle%3E%0A"},{demo:o(()=>[a(xt)]),desc:o(()=>e[5]||(e[5]=[t("p",null,[s("传入"),t("code",null,"target"),s("作为滚动容器。注意：当容器外部还有滚动元素时，可以主动监听外部滚动事件，调用"),t("code",null,"updatePosition"),s("方法去更新固钉位置。")],-1)])),_:1}),a(l,{level:3,id:"API"},{default:o(()=>e[6]||(e[6]=[s("API")])),_:1}),e[7]||(e[7]=t("p",null,[t("code",null,"<affix>"),s(" Props")],-1)),e[8]||(e[8]=t("div",{class:"table-container"},[t("table",null,[t("thead",null,[t("tr",null,[t("th",null,"参数名"),t("th",null,"描述"),t("th",null,"类型"),t("th",null,"默认值")])]),t("tbody",null,[t("tr",null,[t("td",null,"offset"),t("td",null,"偏移量"),t("td",null,"number"),t("td",null,"0")]),t("tr",null,[t("td",null,"position"),t("td",null,"偏移方向"),t("td",null,"'top'｜'bottom'"),t("td",null,"'top'")]),t("tr",null,[t("td",null,"target"),t("td",null,"滚动容器，默认是 window"),t("td",null,"string ｜ window ｜ HTMLElement"),t("td",null,"window")])])])],-1)),e[9]||(e[9]=t("p",null,[t("code",null,"<affix>"),s("Events")],-1)),e[10]||(e[10]=t("div",{class:"table-container"},[t("table",null,[t("thead",null,[t("tr",null,[t("th",null,"事件名"),t("th",null,"描述"),t("th",null,"参数")])]),t("tbody",null,[t("tr",null,[t("td",null,"change"),t("td",null,"元素固定状态改变时触发事件"),t("td",null,"fixed:boolean")])])])],-1)),e[11]||(e[11]=t("p",null,[t("code",null,"<affix>"),s("Methods")],-1)),e[12]||(e[12]=t("div",{class:"table-container"},[t("table",null,[t("thead",null,[t("tr",null,[t("th",null,"方法名"),t("th",null,"描述"),t("th",null,"参数"),t("th",null,"返回值")])]),t("tbody",null,[t("tr",null,[t("td",null,"updatePosition"),t("td",null,"用于主动更新位置"),t("td",null,"-"),t("td",null,"-")])])])],-1))]),_:1})}}};export{yt as default};
