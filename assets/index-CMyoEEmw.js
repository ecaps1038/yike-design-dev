import{d as Q,a0 as W,c as M,o as L,a as X,F as K,h as Z,n as w,X as a,i as U,v as $,b as R,e as j,N as ee,r as Y,R as te,av as v,a1 as ne,Q as ae,ai as le,a2 as A,w as F,f as oe,as as se,x as re}from"./index-RXxV3lR3.js";import{Y as P}from"./index-D6CqN9Om.js";const ie=["onClick"],ue=["onClick"],ce=Q({inheritAttrs:!1,__name:"slider-marks",props:{modelValue:{default:()=>[]},percentStart:{default:0},percentEnd:{default:0},rangeMin:{default:0},rangeMax:{default:100}},emits:["position"],setup(l,{emit:D}){const c=W("slider"),e=l,d=D,y=M(()=>{const E=e.rangeMax-e.rangeMin;return e.modelValue.map(i=>{const o=i.key-e.rangeMin,m=Math.round(o/E*100)||0,s=m/100;return{...i,percent:m,isOver:s===e.percentStart||s===e.percentEnd,isOvered:s>e.percentStart&&s<e.percentEnd,markInfo:i.labelNode||U("span",{style:i.style},i.label)}})});return(E,i)=>(L(),X("div",{class:w(a(c)("marks"))},[(L(!0),X(K,null,Z(y.value,o=>(L(),X("div",{key:o.key,class:w(a(c)("mark-item",{over:o.isOver,overed:o.isOvered})),style:$({left:o.percent+"%"})},[R("div",{class:w(a(c)("mark-item-pointer")),onClick:m=>d("position",o.percent)},null,10,ie),R("div",{class:w(a(c)("mark-item-box")),onClick:m=>d("position",o.percent)},[(L(),j(ee(o.markInfo)))],10,ue)],6))),128))],2))}}),H=l=>l<=0?0:l>=100?100:l,de=(l,D,c,e,d,y,E)=>{let i=0,o=null,m=0;const s=Y(!0),S=Y(!1),u=r=>{te(()=>{let n=Math.round(e.value/c.value*100),t=Math.round(d.value/c.value*100);n=H(n),t=H(t);const k=l.max-l.min,_=k*n/100+l.min,T=k*t/100+l.min,O=y.value?[_,T]:T;E(r,O)})},V=r=>{let n=e.value,t=d.value;if(y.value){if(s.value?(t=r>=i?i:r,t=t<=0?0:t):(n=r>=i?i:r,n=n<=0?0:n),n>=t){const k=n;n=t,t=k,s.value=!s.value}}else t=r>=i?i:r,t=t<=0?0:t;e.value=n,d.value=t,u("update:modelValue")},h=r=>{const n=o;if(l.direction===v[1])if(r.clientX>=n.left&&r.clientX<=n.right){const t=r.clientX-n.left,k=Math.round(t/m)*m;V(k)}else{const t=r.clientX<n.left?-9999:9999;V(t)}else if(l.direction===v[0])if(r.clientY>=n.top&&r.clientY<=n.bottom){const t=n.bottom-r.clientY,k=Math.round(t/m)*m;V(k)}else{const t=r.clientY<n.top?9999:-9999;V(t)}},g=()=>{S.value=!0,i=c.value,window.addEventListener("mousemove",h),window.addEventListener("mouseup",N),o=D.value.getBoundingClientRect(),(l.direction===v[1]||l.direction===v[0])&&(m=i*l.step/100)},x=()=>{l.disabled||(g(),s.value=!1)},b=()=>{l.disabled||(g(),s.value=!0)},N=()=>{S.value=!1,window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",N),u("change")};return{isEndBtn:s,moving:S,handleStartMouseDown:x,handleEndMouseDown:b,emitValue:u}},ve=Q({name:"YkSlider",__name:"slider",props:{modelValue:{default:0},disabled:{type:Boolean,default:!1},min:{default:0},max:{default:100},direction:{default:v[1]},step:{default:1},marks:{default:()=>[]},height:{default:200},showInput:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(l,{emit:D}){const c=W("slider"),e=l,{modelValue:d,marks:y,min:E,max:i}=ne(e),o=Y(),m=D,s=M(()=>Array.isArray(d.value)),S=M(()=>e.max-e.min),u=Y(0),V=()=>{e.direction===v[1]?u.value=o.value?o.value.offsetWidth:0:e.direction===v[0]&&(u.value=o.value?o.value.offsetHeight:0)};ae(()=>{V(),window.addEventListener("resize",V)}),le(()=>{window.removeEventListener("resize",V)});const h=Y(0),g=Y(0),x=M(()=>{if(s.value){const p=(d.value[0]||0)-e.min;return Math.round(p/S.value*100)/100}else return 0}),b=M(()=>{if(s.value){const p=(d.value[1]||0)-e.min;return Math.round(p/S.value*100)/100}else{const f=d.value;return Math.round(f/S.value*100)/100}}),N=M(()=>s.value?(d.value[0]||0).toString():"0"),r=M(()=>s.value?(d.value[1]||0).toString():d.value.toString()),n=M(()=>e.direction===v[1]?"top":"right"),t=M(()=>e.direction===v[1]?{height:"2px"}:e.direction===v[0]?{height:e.height+"px",width:"2px"}:{}),k=M(()=>e.direction===v[1]?{top:0,height:"2px",left:h.value+"px",width:g.value-h.value+"px"}:e.direction===v[0]?{left:0,width:"2px",bottom:h.value+"px",height:g.value-h.value+"px"}:{}),{moving:_,isEndBtn:T,handleStartMouseDown:O,handleEndMouseDown:q,emitValue:G}=de(e,o,u,h,g,s,m);A(x,()=>{_.value||(h.value=x.value*u.value)},{immediate:!0}),A(b,()=>{_.value||(g.value=b.value*u.value)},{immediate:!0}),A(u,()=>{h.value=x.value*u.value,g.value=b.value*u.value},{immediate:!0});const z=f=>{if(e.disabled)return;let p=f/100;if(s.value){const C=Math.abs(x.value-p),I=Math.abs(b.value-p);C>=I?g.value=p*u.value:h.value=p*u.value}else g.value=p*u.value;G("update:modelValue")},J=f=>{if(e.disabled)return;const C=o.value.getBoundingClientRect();if(e.direction===v[1]){const I=f.clientX-C.left;let B=Math.round(I/u.value*100);B=Math.round(B/e.step)*e.step,z(B)}else if(e.direction===v[0]){const I=u.value-(f.clientY-C.top);let B=Math.round(I/u.value*100);B=Math.round(B/e.step)*e.step,z(B)}};return(f,p)=>(L(),X("div",{class:w(a(c)({withMarks:!!a(y).length,disabled:f.disabled},[f.direction]))},[R("div",{ref_key:"runwayRef",ref:o,class:w(a(c)("runway")),style:$(t.value),onClick:J},[R("div",{class:w(a(c)("bar")),style:$(k.value)},[s.value?(L(),j(a(P),{key:0,class:w(a(c)("button",{start:!0})),placement:n.value,open:a(_)&&!a(T),trigger:"hover",title:N.value,onMousedown:a(O)},{default:F(()=>[R("div",{class:w(a(c)("tooltipSpan"))},null,2)]),_:1},8,["class","placement","open","title","onMousedown"])):oe("",!0),U(a(P),{class:w(a(c)("button",{end:!0})),placement:n.value,open:a(_)&&a(T),trigger:"hover",title:r.value,onMousedown:a(q)},{default:F(()=>[R("div",{class:w(a(c)("tooltipSpan"))},null,2)]),_:1},8,["class","placement","open","title","onMousedown"])],6)],6),U(ce,{modelValue:a(y),"onUpdate:modelValue":p[0]||(p[0]=C=>se(y)?y.value=C:null),"range-min":a(E),"range-max":a(i),"percent-start":x.value,"percent-end":b.value,onPosition:z},null,8,["modelValue","range-min","range-max","percent-start","percent-end"])],2))}}),pe=re(ve);export{pe as Y};
