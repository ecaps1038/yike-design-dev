import{$ as j,d as $,a0 as W,a1 as ue,r as C,c as T,a2 as se,Q as ve,o as A,a as w,b as e,n as g,X as a,a3 as P,i as c,a4 as ge,t as K,e as x,N as Ee,f as B,w as F,a5 as we,m as Ce,j as y,k as De,F as oe,h as re,s as Fe,L as ke,x as be,g as ne}from"./index-RXxV3lR3.js";import{Y as ce}from"./index-CMyoEEmw.js";import{c as Ue,g as ye,f as Be,I as _e,a as Re,j as Ie,i as xe,e as $e,b as Le,h as pe,d as Me}from"./index-DGZfFIoo.js";import{I as Ae}from"./index-BpbXgMmN.js";import{b as Ye,c as Oe,a as Se,I as Pe}from"./index-CJzzrLT1.js";import{I as Ve}from"./index-CO5kfKpR.js";import{I as Xe}from"./index-DJVB13Q8.js";import{I as Z}from"./index-B91wdFZi.js";import{I as He}from"./index-EDAclxui.js";import{I as ze}from"./index-Xw7_CFUk.js";import{Y as me}from"./index-BZ1iOtbp.js";import{Y as je}from"./index-DmAFnCQe.js";import"./index-D6CqN9Om.js";import"./index-xntVukyZ.js";import"./index-fuRC5_Zx.js";const Te=["image","jpeg","png","gif"],Ne=({uid:f,uploadUrl:m,selectedFile:l,onSuccess:s,onError:n,onProgress:E})=>{const p=new XMLHttpRequest,k=new FormData;k.append("file",l);try{p.open("POST",m,!0)}catch{n(f,"上传失败、请求地址有误")}return p.upload.onprogress=v=>{if(v.lengthComputable){const D=v.loaded/v.total*100;E(f,D)}},p.onload=function(){if(p.status===200){const v=JSON.parse(p.responseText);v.error||v.err?n(f,v):s(f,v)}},p.onerror=function(){n(f,p.responseText)},p.send(k),{abort(){p.abort()}}};function fe(f,m,l,s){const n=s/100*Math.PI*2,E=f+l*Math.sin(n),p=m-l*Math.cos(n);return`M${f},${m} L${f},${m-l} A${l},${l} 0 ${n<Math.PI?"0":"1"},1 ${E},${p} Z`}function ie(f){return f.map(l=>({uid:j(),status:"success",...l}))}function S(f,m){return m.findIndex(l=>f===l.uid)}function de(f,m){return new File([f],m,{type:f.type})}const he=$({__name:"crop-picture",props:{fileContent:{}},setup(f,{expose:m}){const l={isDragging:!1,startX:0,startY:0,clientX:0,clientY:0,deltaX:0,deltaY:0},s=W("image-crop"),n=f,{fileContent:E}=ue(n),p=C(),k=C(),v=C(.5),D=C(50),_=C(50),r=C(0),R=C(0),b=new Image;b.crossOrigin="Anonymous";const I=C(0),M=C(0),V=T(()=>{var u;const d=(u=E.value)==null?void 0:u.raw;return d?URL.createObjectURL(d):""});se(()=>D.value,d=>{r.value=d/100,U()}),se(()=>_.value,d=>{R.value=Math.max(Math.min(180,(d-50)*3.8),-180),U()});const L=()=>{var h;const d=p.value,u=d.getContext("2d");b.src=(((h=E.value)==null?void 0:h.url)||V.value)??"",b.onload=()=>{const t=b.width/b.height;M.value=300,I.value=Math.min(M.value*t,700),d.width=I.value,d.height=M.value,r.value=Math.min(M.value/b.height,1),v.value=r.value,D.value=v.value*100,u.drawImage(b,0,0,b.width*r.value,b.height*r.value),Y()}},U=()=>{const d=p.value,u=d.getContext("2d");u.clearRect(0,0,d.width,d.height);const h=l.clientX+l.deltaX,t=l.clientY+l.deltaY,o=d.width/2,i=d.height/2,O=R.value*Math.PI/180;u.translate(o,i),u.rotate(O),u.translate(-o,-i),u.drawImage(b,h,t,b.width*r.value,b.height*r.value),u.setTransform(1,0,0,1,0,0),Y()},Y=()=>{const d=p.value,u=d.getContext("2d"),h=240,t=(d.width-h)/2,o=(d.height-h)/2;u.strokeStyle="rgba(255,255,255,0.5)",u.lineWidth=2,u.strokeRect(t,o,h,h),u.fillStyle="rgba(0, 0, 0, 0.5)",u.fillRect(0,0,d.width,o),u.fillRect(0,o+h,d.width,d.height-(o+h)),u.fillRect(0,o,t,h),u.fillRect(t+h,o,d.width-(t+h),h)},N=()=>{R.value=Math.min(180,15+R.value),_.value=Math.max(Math.min(50+R.value*3.8/15,100),0)},ee=()=>{R.value=Math.max(-180,R.value-15),_.value=Math.max(Math.min(50+R.value*3.8/15,100),0)},q=()=>{D.value=Math.max(D.value-1,0),U()},H=()=>{D.value=Math.min(D.value+1,100),U()},G=d=>{const{clientX:u,clientY:h}=d;l.isDragging=!0,l.startX=u,l.startY=h},le=d=>{if(!l.isDragging)return;const{clientX:u,clientY:h}=d;l.deltaX=u-l.startX,l.deltaY=h-l.startY,U()},z=ge(d=>{var u=Math.max(-1,Math.min(1,d.wheelDelta||-d.detail));u<0?q():H()},5),J=d=>{l.isDragging=!1;const{clientX:u,clientY:h}=d,t=u-l.startX,o=h-l.startY;l.clientX+=t,l.clientY+=o,l.deltaX=0,l.deltaY=0};ve(()=>{L()});const Q=async()=>{const d=p.value,u=240,h=(d.width-u)/2,t=(d.height-u)/2,o=document.createElement("canvas");o.width=u,o.height=u,o.getContext("2d").drawImage(d,h,t,u,u,0,0,u,u);let O;return await te(o).then(function(ae){O=ae}),{blobRaw:O,uid:E.value.uid}},te=d=>new Promise(function(u,h){d.toBlob(function(t){u(t)},"image/jpeg",.8)});return m({handleCrop:Q}),(d,u)=>(A(),w("div",{class:g(a(s)())},[e("div",{ref_key:"canvasContainer",ref:k,class:g(a(s)("canvas-container")),onMousedown:P(G,["prevent"]),onMousemove:P(le,["prevent"]),onMouseup:P(J,["prevent"]),onWheel:u[0]||(u[0]=P((...h)=>a(z)&&a(z)(...h),["stop"])),onMousewheel:u[1]||(u[1]=P((...h)=>a(z)&&a(z)(...h),["stop"]))},[e("canvas",{ref_key:"canvasRef",ref:p},null,512)],34),e("div",{class:g(a(s)("operate"))},[e("div",{class:g(a(s)("operate-left"))},[c(a(Ue),{onClick:P(q,["stop"])}),c(a(ce),{modelValue:D.value,"onUpdate:modelValue":u[2]||(u[2]=h=>D.value=h),class:g(a(s)("scale-bar"))},null,8,["modelValue","class"]),c(a(Ae),{onClick:P(H,["stop"])})],2),e("div",{class:g(a(s)("operate-right"))},[c(a(Ye),{onClick:ee}),c(a(ce),{modelValue:_.value,"onUpdate:modelValue":u[3]||(u[3]=h=>_.value=h),class:g(a(s)("scale-bar"))},null,8,["modelValue","class"]),c(a(Oe),{onClick:N})],2)],2)],2))}}),We=$({__name:"upload-draggle",props:{desc:{default:""},disabled:{type:Boolean,default:!1},accept:{default:"*"}},emits:["handleUpload","handleDraggleFiles"],setup(f,{emit:m}){const l=f,s=m,n=W("upload-draggle"),E=C(!1),p=D=>{if(l.disabled)return;E.value=!1,D.stopPropagation();const _=Array.from(D.dataTransfer.files);s("handleDraggleFiles",_)},k=()=>{l.disabled||(E.value=!0)},v=()=>{s("handleUpload")};return(D,_)=>(A(),w("div",{class:g(a(n)()),onDrop:P(p,["prevent"]),onDragover:P(k,["prevent"]),onClick:v},[c(a(ye),{class:g(a(n)("icon"))},null,8,["class"]),e("span",{class:g(a(n)("methods"))},"单击或拖动文件到此区域进行上传",2),e("span",{class:g(a(n)("desc"))},K(D.desc),3)],34))}}),qe={width:"14",height:"14"},Ge=["d"],Je=$({__name:"upload-file-item",props:{progress:{default:0},fileContent:{default:()=>({status:"success",name:"",uid:j()})},shape:{},avatar:{type:Boolean}},emits:["handleAbort","handleRemove","handleReUpload"],setup(f,{emit:m}){const l=f,s=W("upload-file"),{status:n,name:E,uid:p}=ue(l.fileContent),k=m,v=T(()=>R(E.value)),D=()=>{k("handleAbort",p.value)},_=()=>{k("handleRemove",p.value)},r=()=>{k("handleReUpload",p.value)},R=b=>{var M;switch((M=b.split(".").pop())==null?void 0:M.toLowerCase()){case"jpg":case"png":case"jpeg":case"gif":return Le;case"pdf":return $e;case"mp4":case"mkv":return xe;case"doc":case"docx":return Ie;case"xls":case"xlsx":return Re;case"ppt":case"pptx":return Xe;case"wmv":case"mp3":return _e;case"txt":return Be;default:return Ve}};return(b,I)=>(A(),w("div",{class:g(a(s)())},[e("div",{class:g(a(s)("main"))},[e("div",{class:g(a(s)("left"))},[(A(),x(Ee(v.value),{class:"annex-yk-icon"})),e("span",{class:g(a(s)(a(n)))},K(a(E)),3)],2),e("div",{class:g(a(s)("right"))},[a(n)!=="uploading"?(A(),x(a(Z),{key:0,class:"delete-yk-icon",onClick:_})):B("",!0),"success".includes(a(n))?(A(),x(a(He),{key:1,class:"success-yk-icon"})):B("",!0),["error","pause"].includes(a(n))?(A(),x(a(ze),{key:2,class:"re-upload-yk-icon",onClick:r})):B("",!0),["uploading"].includes(a(n))?(A(),w("div",{key:3,class:"abort-yk-icon-container",onClick:D},[(A(),w("svg",qe,[I[0]||(I[0]=e("circle",{cx:"7",cy:"7",r:"7",class:"uploading-bg","fill-opacity":"0.6"},null,-1)),e("path",{d:a(fe)(7,7,7,b.progress),class:"uploading-bg"},null,8,Ge)]))])):B("",!0)],2)],2)],2))}}),Qe=["src"],Ze={width:"36",height:"36"},Ke=["d"],el={key:2,class:"upload-icon fail-icon"},ll={key:3,class:"hover-icons"},tl={key:4,class:"hover-icons"},al={key:5,class:"hover-icons"},ol=$({__name:"upload-picture-item",props:{progress:{default:0},fileContent:{default:()=>({status:"success",name:"",uid:j(),avatar:!1})},shape:{default:"default"},avatar:{type:Boolean}},emits:["handleAbort","handleRemove","handleReUpload","handleEdit","handleReview"],setup(f,{emit:m}){const l=f,s=W("upload-picture"),{status:n,uid:E,raw:p,url:k}=ue(l.fileContent),v=C(!1),D=C(),_=T(()=>p!=null&&p.value?URL.createObjectURL(p.value):""),r=m,R=()=>{r("handleReview",E.value)},b=()=>{r("handleAbort",E.value)},I=()=>{r("handleRemove",E.value)},M=()=>{r("handleReUpload",E.value)},V=()=>{v.value=!0},L=async()=>{const{blobRaw:U,uid:Y}=await D.value.handleCrop();r("handleEdit",U,Y),v.value=!1};return(U,Y)=>(A(),w("div",{class:g(a(s)([U.shape]))},[_.value||a(k)?(A(),w("img",{key:0,src:a(k)||_.value,alt:""},null,8,Qe)):B("",!0),e("div",{class:g(a(s)("overlay-hover",[a(n)]))},null,2),a(n)==="uploading"?(A(),w("div",{key:1,class:"upload-icon uploading-icons",onClick:b},[(A(),w("svg",Ze,[Y[1]||(Y[1]=e("circle",{cx:"18",cy:"18",r:"18","fill-opacity":"0.5"},null,-1)),e("path",{d:a(fe)(18,18,18,U.progress),class:"progress-path"},null,8,Ke)]))])):B("",!0),["error","pause"].includes(a(n))?(A(),w("div",el,[c(a(Se))])):B("",!0),["error","pause"].includes(a(n))?(A(),w("div",ll,[c(a(pe),{onClick:M}),c(a(Z),{onClick:I})])):B("",!0),a(n)==="success"&&!U.avatar?(A(),w("div",tl,[c(a(Pe),{onClick:R}),c(a(Z),{onClick:I})])):B("",!0),a(n)==="success"&&U.avatar?(A(),w("div",al,[c(a(Me),{onClick:V}),c(a(Z),{onClick:I})])):B("",!0),v.value?(A(),x(a(me),{key:6,modelValue:v.value,"onUpdate:modelValue":Y[0]||(Y[0]=N=>v.value=N),scrollable:!1,title:"图片裁剪",size:"s",onOnSubmit:L},{default:F(()=>[c(he,{ref_key:"cropRef",ref:D,"file-content":U.fileContent},null,8,["file-content"])]),_:1},8,["modelValue"])):B("",!0)],2))}}),nl=["accept","multiple"],sl={class:"picture-desc"},ul=$({name:"YkUpload",__name:"upload",props:{accept:{default:"*"},maxSize:{default:3*1024*1024},multiple:{type:Boolean,default:!0},limit:{default:0},uploadUrl:{default:""},shape:{default:"default"},fileList:{default:()=>[]},desc:{default:""},avatar:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1}},emits:["handleSuccess","handleDelete","handleError","handleBeforeUpload"],setup(f,{emit:m}){const l=W("upload"),s=f,n=m,E=C(!1),p=C(!1),k=C(),v=C(!1),D=we({name:"",url:"",uid:j(),status:"uploading"}),_=C(0),r=C(ie(s.fileList)),R=C(),b=new Map,I=T(()=>r.value.length),M=T(()=>r.value.map(o=>o.raw?URL.createObjectURL(o.raw):o.url)),V=T(()=>!!s.limit&&I.value>=s.limit);E.value=Te.some(t=>s.accept.includes(t))||s.avatar;const{proxy:L}=ke(),U=async t=>{const o=t==null?void 0:t.name;if(!o){L.$message.error("文件上传失败，请重新选择文件");return}const i=j();r.value.push({name:o,status:"uploading",raw:t,uid:i});const O={uid:i,uploadUrl:s.uploadUrl,selectedFile:t,fileName:o,onSuccess:N,onError:q,onProgress:ee};b.set(i,Ne(O))},Y=t=>{r.value=[];const o=t==null?void 0:t.name;if(!o){L.$message.error("文件上传失败，请重新选择文件");return}const i=j();D.name=o,D.raw=t,D.uid=i,v.value=!0},N=(t,o)=>{L.$message.success("上传成功");const i=S(t,r.value);r.value[i].status="success",n("handleSuccess",o,r.value)},ee=(t,o)=>{const i=S(t,r.value);r.value[i].progress=o},q=(t,o)=>{L.$message.error(o||"上传失败");const i=S(t,r.value);r.value[i].status="error",n("handleError",o,r.value)},H=async()=>{var t;V.value||(t=R.value)==null||t.click()},G=t=>(n("handleBeforeUpload",t),s.maxSize&&t.size>s.maxSize?(L.$message.error("超出限制大小，请压缩后上传"),!1):s.limit&&s.limit<=I.value?(L.$message.error("数量超出限制"),!1):!0),le=t=>{const o=Array.from(t.target.files);if(o.length){if(s.avatar){G(o[0]),Y(o[0]);return}o.forEach(i=>{const O=G(i);i&&O&&U(i)}),t.target.value=""}},z=t=>{const o=S(t,r.value),i=b.get(t);i!=null&&i.abort&&(i.abort(),r.value[o].status="pause",L.$message.error("用户中断上传"))},J=t=>{n("handleDelete",[S(t,r.value),r.value]),r.value.splice(S(t,r.value),1),L.$message.success("已删除")},Q=t=>{const o=S(t,r.value),i=r.value[o].raw;r.value.splice(o,1),U(i)},te=(t,o)=>{const i=S(o,r.value),O=r.value[i].name;r.value.splice(S(o,r.value),1);const ae=de(t,O);U(ae)},d=t=>{const o=S(t,r.value);_.value=o,p.value=!0},u=t=>{t.forEach(o=>{U(o)})},h=async()=>{const{blobRaw:t}=await k.value.handleCrop(),o=de(t,D.name);U(o),v.value=!1};return se(()=>s.fileList,()=>{r.value=ie(s.fileList)}),(t,o)=>(A(),w(oe,null,[e("div",{class:g(a(l)())},[e("input",{ref_key:"inputRef",ref:R,style:{display:"none"},accept:t.accept,multiple:t.multiple,type:"file",onChange:le,onClick:o[0]||(o[0]=P(()=>{},["stop"]))},null,40,nl),E.value?B("",!0):(A(),w("div",{key:0,class:g(a(l)("files"))},[t.draggable?B("",!0):(A(),w("div",{key:0,class:g(a(l)("file"))},[c(a(Ce),{class:g(a(l)("file-button")),type:"secondary",disabled:V.value,onClick:H},{default:F(()=>[c(a(pe),{class:g(a(l)("file-icon"))},null,8,["class"]),o[4]||(o[4]=e("div",null,"上传文件",-1))]),_:1},8,["class","disabled"]),c(a(De),{type:"third"},{default:F(()=>[y(K(t.desc),1)]),_:1})],2)),t.draggable?(A(),w("div",{key:1,class:g(a(l)("draggle"))},[c(We,{desc:t.desc,disabled:V.value,accept:t.accept,onHandleUpload:H,onHandleDraggleFiles:u},null,8,["desc","disabled","accept"])],2)):B("",!0),r.value.length?(A(),w("div",{key:2,class:g(a(l)("file-list"))},[(A(!0),w(oe,null,re(r.value,i=>(A(),x(Je,{key:i.uid,"file-content":i,progress:i.progress,onHandleRemove:J,onHandleReUpload:Q,onHandleAbort:z},null,8,["file-content","progress"]))),128))],2)):B("",!0)],2)),E.value&&!t.draggable?(A(),x(a(Fe),{key:1,wrap:"",size:8},{default:F(()=>[(A(!0),w(oe,null,re(r.value,i=>(A(),w("span",{class:g(a(l)("picture"))},[(A(),x(ol,{key:i.uid,"file-content":i,"is-picture":E.value,progress:i.progress,shape:t.shape,avatar:t.avatar,onHandleRemove:J,onHandleReUpload:Q,onHandleUpload:H,onHandleAbort:z,onHandleEdit:te,onHandleReview:d},null,8,["file-content","is-picture","progress","shape","avatar"]))],2))),256)),!(t.avatar&&I.value)&&!V.value?(A(),w("div",{key:0,class:g([a(l)("picture-button",{disabled:V.value},[t.shape])]),onClick:H},[e("div",sl,[c(a(Ae),{class:g(a(l)("picture-button-icon"))},null,8,["class"]),t.desc?(A(),w("span",{key:0,class:g(a(l)("picture-button-desc"))},K(t.desc),3)):B("",!0)])],2)):B("",!0)]),_:1})):B("",!0)],2),c(a(je),{visible:p.value,"onUpdate:visible":o[1]||(o[1]=i=>p.value=i),current:_.value,"onUpdate:current":o[2]||(o[2]=i=>_.value=i),"src-list":M.value,"is-render":!1,width:"300",height:"200",fit:"cover"},null,8,["visible","current","src-list"]),v.value?(A(),x(a(me),{key:0,modelValue:v.value,"onUpdate:modelValue":o[3]||(o[3]=i=>v.value=i),scrollable:!1,title:"图片裁剪",size:"s",onOnSubmit:h},{default:F(()=>[c(he,{ref_key:"cropRef",ref:k,"file-content":D},null,8,["file-content"])]),_:1},8,["modelValue"])):B("",!0)],64))}}),X=be(ul),rl="https://www.huohuo90.com:3005/upload",cl=$({__name:"upload-primary",setup(f){const m=C([{url:"https://www.huohuo90.com:3005/logo/yike.png",name:"默认图片"}]);return(l,s)=>{const n=X;return A(),x(n,{"upload-url":rl,"file-list":m.value,desc:"上传内容要求","max-size":0},null,8,["file-list"])}}}),il="https://www.huohuo90.com:3005/upload",dl=$({__name:"upload-single-file",setup(f){const m=C([]);return(l,s)=>{const n=X;return A(),x(n,{"upload-url":il,multiple:!1,"file-list":m.value,desc:"仅允许逐个上传文件"},null,8,["file-list"])}}}),pl="https://www.huohuo90.com:3005/upload",Al=$({__name:"upload-limit",setup(f){const m=C([{url:"https://www.huohuo90.com:3005/logo/yike.png",name:"默认图片"}]);return(l,s)=>{const n=X;return A(),x(n,{"upload-url":pl,"file-list":m.value,limit:3,desc:"限制上传三个文件，此demo演示上传失败"},null,8,["file-list"])}}}),ml="https://www.huohuo90.com:3005/upload",fl=$({__name:"upload-picture",setup(f){const m=C([]);return(l,s)=>{const n=X;return A(),w("div",null,[c(n,{"upload-url":ml,"file-list":m.value,accept:"image/*"},null,8,["file-list"])])}}}),hl="https://www.huohuo90.com:3005/upload",vl=$({__name:"upload-picture-circle",setup(f){const m=C([{name:"默认图片",url:"https://www.huohuo90.com:3005/logo/yike.png"}]);return(l,s)=>{const n=X;return A(),w("div",null,[c(n,{"upload-url":hl,"file-list":m.value,shape:"circle",accept:"image/*",desc:"上传图片",limit:2},null,8,["file-list"])])}}}),gl="https://www.huohuo90.com:3005/upload",El=$({__name:"upload-avatar",setup(f){const m=C([{name:"默认图片",url:"https://www.huohuo90.com:3005/logo/dafei.jpg"}]);return(l,s)=>{const n=X;return A(),w("div",null,[c(n,{"upload-url":gl,"file-list":m.value,shape:"circle",accept:"image/*",avatar:!0},null,8,["file-list"])])}}}),wl="https://www.huohuo90.com:3005/upload",Cl=$({__name:"upload-draggle",setup(f){const m=C([]);return(l,s)=>{const n=X;return A(),w("div",null,[c(n,{"upload-url":wl,"file-list":m.value,accept:"*",desc:"上传内容要求",draggable:!0},null,8,["file-list"])])}}}),Dl="https://www.huohuo90.com:3005/upload",Fl=$({__name:"upload-callback",setup(f){const m=C([{url:"https://www.huohuo90.com:3005/logo/yike.png",name:"默认图片"}]),l=(p,k)=>{console.log("🚀 ~ file: upload-callback.vue:20 ~ handleSuccess ~ currentList:",k),console.log("🚀 ~ file: upload-callback.vue:20 ~ handleSuccess ~ res:",p)},s=(p,k)=>{console.log("🚀 ~ file: upload-callback.vue:28 ~ handleError ~ currentList:",k),console.log("🚀 ~ file: upload-callback.vue:28 ~ handleError ~ error:",p)},n=p=>{console.log("🚀 ~ file: upload-callback.vue:36 ~ handleBeforeUpload ~ file:",p)},E=p=>{console.log("🚀 ~ file: upload-callback.vue:43 ~ handleDelete ~ currentList:",p)};return(p,k)=>{const v=X;return A(),x(v,{"upload-url":Dl,"file-list":m.value,desc:"上传内容要求","max-size":0,onHandleSuccess:l,onHandleError:s,onHandleBeforeUpload:n,onHandleDelete:E},null,8,["file-list"])}}}),Pl={__name:"doc",setup(f){return(m,l)=>{const s=ne("yk-title"),n=ne("yk-snippet"),E=ne("DocPage");return A(),x(E,null,{default:F(()=>[c(s,{level:2,id:"YkUpload-文件上传"},{default:F(()=>l[0]||(l[0]=[y("YkUpload 文件上传")])),_:1}),c(n,{title:"基本用法",code:"%3Ctemplate%3E%0A%20%20%3Cyk-upload%0A%20%20%20%20%3Aupload-url%3D%22uploadUrl%22%0A%20%20%20%20%3Afile-list%3D%22fileUrl%22%0A%20%20%20%20desc%3D%22%E4%B8%8A%E4%BC%A0%E5%86%85%E5%AE%B9%E8%A6%81%E6%B1%82%22%0A%20%20%20%20%3Amax-size%3D%220%22%0A%20%20%3E%3C%2Fyk-upload%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20lang%3D%22ts%22%20setup%3E%0Aimport%20%7B%20ref%20%7D%20from%20'vue'%0A%2F%2F%20const%20uploadUrl%20%3D%20'http%3A%2F%2Fchat.finecoder.cn%3A3976%2Fupload'%0Aconst%20uploadUrl%20%3D%20'https%3A%2F%2Fwww.huohuo90.com%3A3005%2Fupload'%0Aconst%20fileUrl%20%3D%20ref(%5B%0A%20%20%7B%0A%20%20%20%20url%3A%20'https%3A%2F%2Fwww.huohuo90.com%3A3005%2Flogo%2Fyike.png'%2C%0A%20%20%20%20name%3A%20'%E9%BB%98%E8%AE%A4%E5%9B%BE%E7%89%87'%2C%0A%20%20%7D%2C%0A%5D)%0A%3C%2Fscript%3E%0A"},{demo:F(()=>[c(cl)]),desc:F(()=>l[1]||(l[1]=[e("p",null,"文件列表上传",-1)])),_:1}),c(n,{title:"单文件上传",code:"%3Ctemplate%3E%0A%20%20%3Cyk-upload%0A%20%20%20%20%3Aupload-url%3D%22uploadUrl%22%0A%20%20%20%20%3Amultiple%3D%22false%22%0A%20%20%20%20%3Afile-list%3D%22fileUrl%22%0A%20%20%20%20desc%3D%22%E4%BB%85%E5%85%81%E8%AE%B8%E9%80%90%E4%B8%AA%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%22%0A%20%20%3E%3C%2Fyk-upload%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20lang%3D%22ts%22%20setup%3E%0Aimport%20%7B%20ref%20%7D%20from%20'vue'%0A%2F%2F%20const%20uploadUrl%20%3D%20'http%3A%2F%2F192.168.1.207%3A3976%2Fupload'%0Aconst%20uploadUrl%20%3D%20'https%3A%2F%2Fwww.huohuo90.com%3A3005%2Fupload'%0Aconst%20fileUrl%20%3D%20ref(%5B%5D)%0A%3C%2Fscript%3E%0A"},{demo:F(()=>[c(dl)]),desc:F(()=>l[2]||(l[2]=[e("p",null,[y("通过 "),e("code",null,"multiple"),y(" 控制是否能够上传多文件，默认为 true")],-1)])),_:1}),c(n,{title:"文件数量限制",code:"%3Ctemplate%3E%0A%20%20%3Cyk-upload%0A%20%20%20%20%3Aupload-url%3D%22uploadUrl%22%0A%20%20%20%20%3Afile-list%3D%22fileUrl%22%0A%20%20%20%20%3Alimit%3D%223%22%0A%20%20%20%20desc%3D%22%E9%99%90%E5%88%B6%E4%B8%8A%E4%BC%A0%E4%B8%89%E4%B8%AA%E6%96%87%E4%BB%B6%EF%BC%8C%E6%AD%A4demo%E6%BC%94%E7%A4%BA%E4%B8%8A%E4%BC%A0%E5%A4%B1%E8%B4%A5%22%0A%20%20%3E%3C%2Fyk-upload%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20lang%3D%22ts%22%20setup%3E%0Aimport%20%7B%20ref%20%7D%20from%20'vue'%0A%2F%2F%20const%20uploadUrl%20%3D%20'http%3A%2F%2F192.168.1.207%3A3976%2Fupload'%0Aconst%20uploadUrl%20%3D%20'https%3A%2F%2Fwww.huohuo90.com%3A3005%2Fupload'%0Aconst%20fileUrl%20%3D%20ref(%5B%0A%20%20%7B%0A%20%20%20%20url%3A%20'https%3A%2F%2Fwww.huohuo90.com%3A3005%2Flogo%2Fyike.png'%2C%0A%20%20%20%20name%3A%20'%E9%BB%98%E8%AE%A4%E5%9B%BE%E7%89%87'%2C%0A%20%20%7D%2C%0A%5D)%0A%3C%2Fscript%3E%0A"},{demo:F(()=>[c(Al)]),desc:F(()=>l[3]||(l[3]=[e("p",null,[y("通过 "),e("code",null,"limit"),y(" 控制文件上传数量限制")],-1)])),_:1}),c(n,{title:"图片上传",code:"%3Ctemplate%3E%0A%20%20%3Cdiv%3E%0A%20%20%20%20%3Cyk-upload%0A%20%20%20%20%20%20%3Aupload-url%3D%22uploadUrl%22%0A%20%20%20%20%20%20%3Afile-list%3D%22fileUrl%22%0A%20%20%20%20%20%20accept%3D%22image%2F*%22%0A%20%20%20%20%3E%3C%2Fyk-upload%3E%0A%20%20%3C%2Fdiv%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20lang%3D%22ts%22%20setup%3E%0Aimport%20%7B%20ref%20%7D%20from%20'vue'%0A%2F%2F%20const%20uploadUrl%20%3D%20'http%3A%2F%2Fchat.finecoder.cn%3A3976%2Fupload'%0Aconst%20uploadUrl%20%3D%20'https%3A%2F%2Fwww.huohuo90.com%3A3005%2Fupload'%0Aconst%20fileUrl%20%3D%20ref(%5B%5D)%0A%3C%2Fscript%3E%0A"},{demo:F(()=>[c(fl)]),desc:F(()=>l[4]||(l[4]=[e("p",null,[y("通过 "),e("code",null,"accept"),y(" 判断是否仅上传图片，若接受对象包含 "),e("code",null,"image"),y(" 、 "),e("code",null,"png"),y(" 、 "),e("code",null,"jpg/jpeg"),y(" ，则采用图片列表上传 UI")],-1)])),_:1}),c(n,{title:"图片列表样式及限制数量",code:"%3Ctemplate%3E%0A%20%20%3Cdiv%3E%0A%20%20%20%20%3Cyk-upload%0A%20%20%20%20%20%20%3Aupload-url%3D%22uploadUrl%22%0A%20%20%20%20%20%20%3Afile-list%3D%22fileUrl%22%0A%20%20%20%20%20%20shape%3D%22circle%22%0A%20%20%20%20%20%20accept%3D%22image%2F*%22%0A%20%20%20%20%20%20desc%3D%22%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%22%0A%20%20%20%20%20%20%3Alimit%3D%222%22%0A%20%20%20%20%3E%3C%2Fyk-upload%3E%0A%20%20%3C%2Fdiv%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20lang%3D%22ts%22%20setup%3E%0Aimport%20%7B%20ref%20%7D%20from%20'vue'%0A%2F%2F%20const%20uploadUrl%20%3D%20'http%3A%2F%2Fchat.foder.cn%3A3976%2Fupload'%0Aconst%20uploadUrl%20%3D%20'https%3A%2F%2Fwww.huohuo90.com%3A3005%2Fupload'%0Aconst%20fileUrl%20%3D%20ref(%5B%0A%20%20%7B%0A%20%20%20%20name%3A%20'%E9%BB%98%E8%AE%A4%E5%9B%BE%E7%89%87'%2C%0A%20%20%20%20url%3A%20'https%3A%2F%2Fwww.huohuo90.com%3A3005%2Flogo%2Fyike.png'%2C%0A%20%20%7D%2C%0A%5D)%0A%3C%2Fscript%3E%0A"},{demo:F(()=>[c(vl)]),desc:F(()=>l[5]||(l[5]=[e("p",null,[y("通过 "),e("code",null,"limit"),y(" 控制图片上限、通过 "),e("code",null,"shape"),y(" 修改列表风格")],-1)])),_:1}),c(n,{title:"头像上传",code:"%3Ctemplate%3E%0A%20%20%3Cdiv%3E%0A%20%20%20%20%3Cyk-upload%0A%20%20%20%20%20%20%3Aupload-url%3D%22uploadUrl%22%0A%20%20%20%20%20%20%3Afile-list%3D%22fileUrl%22%0A%20%20%20%20%20%20shape%3D%22circle%22%0A%20%20%20%20%20%20accept%3D%22image%2F*%22%0A%20%20%20%20%20%20%3Aavatar%3D%22true%22%0A%20%20%20%20%3E%3C%2Fyk-upload%3E%0A%20%20%3C%2Fdiv%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20lang%3D%22ts%22%20setup%3E%0Aimport%20%7B%20ref%20%7D%20from%20'vue'%0Aconst%20uploadUrl%20%3D%20'https%3A%2F%2Fwww.huohuo90.com%3A3005%2Fupload'%0Aconst%20fileUrl%20%3D%20ref(%5B%0A%20%20%7B%0A%20%20%20%20name%3A%20'%E9%BB%98%E8%AE%A4%E5%9B%BE%E7%89%87'%2C%0A%20%20%20%20url%3A%20'https%3A%2F%2Fwww.huohuo90.com%3A3005%2Flogo%2Fdafei.jpg'%2C%0A%20%20%7D%2C%0A%5D)%0A%3C%2Fscript%3E%0A"},{demo:F(()=>[c(El)]),desc:F(()=>l[6]||(l[6]=[e("p",null,[y("通过传入 "),e("code",null,"avatar"),y(" 进行头像上传，只允许上传一张图片且上传后允许通过裁剪重新上传")],-1)])),_:1}),c(n,{title:"拖拽上传",code:"%3Ctemplate%3E%0A%20%20%3Cdiv%3E%0A%20%20%20%20%3Cyk-upload%0A%20%20%20%20%20%20%3Aupload-url%3D%22uploadUrl%22%0A%20%20%20%20%20%20%3Afile-list%3D%22fileUrl%22%0A%20%20%20%20%20%20accept%3D%22*%22%0A%20%20%20%20%20%20desc%3D%22%E4%B8%8A%E4%BC%A0%E5%86%85%E5%AE%B9%E8%A6%81%E6%B1%82%22%0A%20%20%20%20%20%20%3Adraggable%3D%22true%22%0A%20%20%20%20%3E%3C%2Fyk-upload%3E%0A%20%20%3C%2Fdiv%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20lang%3D%22ts%22%20setup%3E%0Aimport%20%7B%20ref%20%7D%20from%20'vue'%0A%2F%2F%20const%20uploadUrl%20%3D%20'http%3A%2F%2Fchat.finecoder.cn%3A3976%2Fupload'%0Aconst%20uploadUrl%20%3D%20'https%3A%2F%2Fwww.huohuo90.com%3A3005%2Fupload'%0Aconst%20fileUrl%20%3D%20ref(%5B%5D)%0A%3C%2Fscript%3E%0A"},{demo:F(()=>[c(Cl)]),desc:F(()=>l[7]||(l[7]=[e("p",null,[y("通过传入 "),e("code",null,"draggle"),y(" 将 UI 变更为拖拽区，文件列表与常规文件一致，允许通过拖拽上传文件")],-1)])),_:1}),c(n,{title:"回调函数",code:"%3Ctemplate%3E%0A%20%20%3Cyk-upload%0A%20%20%20%20%3Aupload-url%3D%22uploadUrl%22%0A%20%20%20%20%3Afile-list%3D%22fileUrl%22%0A%20%20%20%20desc%3D%22%E4%B8%8A%E4%BC%A0%E5%86%85%E5%AE%B9%E8%A6%81%E6%B1%82%22%0A%20%20%20%20%3Amax-size%3D%220%22%0A%20%20%20%20%40handle-success%3D%22handleSuccess%22%0A%20%20%20%20%40handle-error%3D%22handleError%22%0A%20%20%20%20%40handle-before-upload%3D%22handleBeforeUpload%22%0A%20%20%20%20%40handle-delete%3D%22handleDelete%22%0A%20%20%3E%3C%2Fyk-upload%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20lang%3D%22ts%22%20setup%3E%0Aimport%20%7B%20ref%20%7D%20from%20'vue'%0A%2F%2F%20const%20uploadUrl%20%3D%20'http%3A%2F%2Fchat.finecoder.cn%3A3976%2Fupload'%0Aconst%20uploadUrl%20%3D%20'https%3A%2F%2Fwww.huohuo90.com%3A3005%2Fupload'%0Aconst%20fileUrl%20%3D%20ref(%5B%0A%20%20%7B%0A%20%20%20%20url%3A%20'https%3A%2F%2Fwww.huohuo90.com%3A3005%2Flogo%2Fyike.png'%2C%0A%20%20%20%20name%3A%20'%E9%BB%98%E8%AE%A4%E5%9B%BE%E7%89%87'%2C%0A%20%20%7D%2C%0A%5D)%0Aconst%20handleSuccess%20%3D%20(res%2C%20currentList)%20%3D%3E%20%7B%0A%20%20console.log(%0A%20%20%20%20'%F0%9F%9A%80%20~%20file%3A%20upload-callback.vue%3A20%20~%20handleSuccess%20~%20currentList%3A'%2C%0A%20%20%20%20currentList%2C%0A%20%20)%0A%20%20console.log('%F0%9F%9A%80%20~%20file%3A%20upload-callback.vue%3A20%20~%20handleSuccess%20~%20res%3A'%2C%20res)%0A%7D%0Aconst%20handleError%20%3D%20(error%2C%20currentList)%20%3D%3E%20%7B%0A%20%20console.log(%0A%20%20%20%20'%F0%9F%9A%80%20~%20file%3A%20upload-callback.vue%3A28%20~%20handleError%20~%20currentList%3A'%2C%0A%20%20%20%20currentList%2C%0A%20%20)%0A%20%20console.log('%F0%9F%9A%80%20~%20file%3A%20upload-callback.vue%3A28%20~%20handleError%20~%20error%3A'%2C%20error)%0A%7D%0Aconst%20handleBeforeUpload%20%3D%20(file)%20%3D%3E%20%7B%0A%20%20console.log(%0A%20%20%20%20'%F0%9F%9A%80%20~%20file%3A%20upload-callback.vue%3A36%20~%20handleBeforeUpload%20~%20file%3A'%2C%0A%20%20%20%20file%2C%0A%20%20)%0A%7D%0Aconst%20handleDelete%20%3D%20(currentList)%20%3D%3E%20%7B%0A%20%20console.log(%0A%20%20%20%20'%F0%9F%9A%80%20~%20file%3A%20upload-callback.vue%3A43%20~%20handleDelete%20~%20currentList%3A'%2C%0A%20%20%20%20currentList%2C%0A%20%20)%0A%7D%0A%3C%2Fscript%3E%0A"},{demo:F(()=>[c(Fl)]),desc:F(()=>l[8]||(l[8]=[e("p",null,"目前支持上传前、上传成功、上传失败、删除文件四个钩子",-1)])),_:1}),c(s,{level:3,id:"API"},{default:F(()=>l[9]||(l[9]=[y("API")])),_:1}),l[11]||(l[11]=e("div",{class:"table-container"},[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"参数"),e("th",null,"描述"),e("th",null,"类型"),e("th",null,"默认值")])]),e("tbody",null,[e("tr",null,[e("td",null,"accept"),e("td",null,"接受文件类型"),e("td",null,"accept"),e("td",null,"*")]),e("tr",null,[e("td",null,"maxSize"),e("td",null,"文件大小限制"),e("td",null,"number"),e("td",null,"3*1024*1024(3M)")]),e("tr",null,[e("td",null,"multiple"),e("td",null,"是否允许多文件上传"),e("td",null,"boolean"),e("td",null,"true")]),e("tr",null,[e("td",null,"limit"),e("td",null,"控制文件上传数量"),e("td",null,"number"),e("td",null,"0")]),e("tr",null,[e("td",null,"shape"),e("td",null,"图片列表形状"),e("td",null,"'default' | 'circle'"),e("td",null,"'default'")]),e("tr",null,[e("td",null,"uploadUrl"),e("td",null,"文件上传路径"),e("td",null,"string"),e("td",null,"''")]),e("tr",null,[e("td",null,"fileList"),e("td",null,"当前文件列表"),e("td",null,[e("code",null,"{name:'file-name',url:'url'}[]")]),e("td",null,"[]")]),e("tr",null,[e("td",null,"desc"),e("td",null,"文件上传提示"),e("td",null,"string"),e("td",null,"''")]),e("tr",null,[e("td",null,"avatar"),e("td",null,"是否上传头像"),e("td",null,"boolean"),e("td",null,"false")]),e("tr",null,[e("td",null,"draggable"),e("td",null,"是否采用拖拽上传交互"),e("td",null,"boolean"),e("td",null,"false")])])])],-1)),c(s,{level:3,id:"钩子"},{default:F(()=>l[10]||(l[10]=[y("钩子")])),_:1}),l[12]||(l[12]=e("div",{class:"table-container"},[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"方法"),e("th",null,"描述"),e("th",null,"出参类型")])]),e("tbody",null,[e("tr",null,[e("td",null,"handleSuccess"),e("td",null,"成功回调"),e("td",null,"(res:response,currentList:File[])")]),e("tr",null,[e("td",null,"handleDelete"),e("td",null,"删除回调"),e("td",null,"(index,currentList:File[])")]),e("tr",null,[e("td",null,"handleError"),e("td",null,"错误回调"),e("td",null,"(err:response,currentList:File[])")]),e("tr",null,[e("td",null,"handleBeforeUpload"),e("td",null,"上传前回调"),e("td",null,"(file:File)")])])])],-1))]),_:1})}}};export{Pl as default};
