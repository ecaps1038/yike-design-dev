import{d as Q,a0 as U,a1 as _,r as d,X as e,c as x,a2 as ee,o as u,a as r,b as m,n as o,W as v,f as i,v as ae,i as b,I as se,t as S,at as le,al as te,w as oe,Z as ne,F as ue,x as re}from"./index-RXxV3lR3.js";import{I as ie}from"./index-C-B09IA9.js";import{u as de}from"./use-form-item-DRo2rIuT.js";const pe=["id","name","placeholder","disabled","readonly","required","type","value","aria-disabled"],ce={key:0},me=Q({name:"YkInput",__name:"input",props:{id:{},name:{},size:{default:"l"},type:{default:"text"},placeholder:{},modelValue:{default:""},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},visible:{type:Boolean,default:!0},status:{default:"primary"},loading:{type:Boolean,default:!1},showCounter:{type:Boolean,default:!1},limit:{default:-1},style:{},message:{default:""},inputStyle:{}},emits:["focus","blur","clear","change","submit","keydown","update:modelValue","hoverin","hoverout"],setup(q,{expose:E,emit:T}){const l=q,n=U("input"),{disabled:I,status:h,message:g,size:N,inputStyle:R}=_(l),{mergedDisabled:c,isError:k,mergedStatus:D,mergedSize:L,validate:w}=de({disabled:I,status:h,message:g,size:N}),f=d(!1),$=l.limit>0,M=l.showCounter&&$,O=l.type==="password"&&!l.disabled&&l.visible;let s=e(l.modelValue);const z=d(s.length),t=T,p=d(),y=d(!1),C=d(!1),F=d(s.length>0),B=d(l.type),P=()=>{l.disabled||l.readonly||(y.value=!0,w("focus"),t("focus",s))},V=()=>{var a;l.disabled||l.readonly||(s=((a=p.value)==null?void 0:a.value)??"",$&&!f.value&&s.length>l.limit&&(s=s.slice(0,l.limit),p.value.value=s),F.value=s.length>0,z.value=s.length,w("change"),t("update:modelValue",s),t("change",s))},H=()=>{y.value=!1,w("blur"),t("blur",s)},K=()=>{C.value=!0,t("hoverin")},W=()=>{C.value=!1,t("hoverout")},X=()=>{p.value.value="",p.value.focus(),V(),t("clear","")},Z=()=>{f.value=!0},j=()=>{f.value=!1,V()},A=a=>{a.key==="Enter"&&!f.value&&t("submit"),t("keydown",a)},G=()=>{B.value=B.value==="text"?"password":"text"},Y=x(()=>({"yk-input__button":!0,"yk-input__button-show":F.value&&(l.clearable||l.visible)&&(y.value||C.value)})),J=a=>{s=a,t("update:modelValue",s),t("change",s)};return ee(()=>l.modelValue,a=>{s=a,t("update:modelValue",s)}),E({inputRef:p,setValue:J}),(a,fe)=>(u(),r(ue,null,[m("div",te({class:e(n)(),style:a.style},a.$attrs,{onMouseenter:K,onMouseleave:W}),[a.$slots.prepend?(u(),r("span",{key:0,class:o(e(n)("prepend"))},[v(a.$slots,"prepend")],2)):i("",!0),m("div",{class:o([e(n)("inner",{[`${e(h)}`]:!e(c),[`${e(h)}--focus`]:y.value&&!e(c)&&!e(k),loading:a.loading,disabled:e(c),readonly:a.readonly,rightbr0:!!a.$slots.append,leftbr0:!!a.$slots.prepend,error:e(k),"error-focus":e(k)},[e(L)])])},[v(a.$slots,"prefix"),m("input",{id:a.id,ref_key:"inputRef",ref:p,name:a.name,placeholder:a.placeholder,disabled:e(c),readonly:a.readonly,required:a.required,class:o(e(n)("widget")),type:B.value,tabindex:"0",value:e(s),"aria-disabled":e(c),style:ae(e(R)),onFocus:P,onInput:V,onBlur:H,onCompositionstart:Z,onCompositionend:j,onKeydown:A},null,46,pe),m("div",{class:o(e(n)("buttons"))},[e(O)?(u(),r("button",{key:0,"aria-label":"查看/隐藏密码",class:o(["yk-input__button",Y.value]),onClick:G},[b(e(ie))],2)):i("",!0),a.clearable&&!e(I)?(u(),r("button",{key:1,"aria-label":"清空内容",class:o(["yk-input__button",Y.value]),onClick:X},[b(e(se))],2)):i("",!0)],2),a.showCounter?(u(),r("div",{key:0,class:o(e(n)("counter"))},[m("span",null,S(z.value),1),e(M)?(u(),r("span",ce," / "+S(a.limit),1)):i("",!0)],2)):i("",!0),a.loading?(u(),r("div",{key:1,class:o(e(n)("spinner"))},[b(e(le))],2)):i("",!0),v(a.$slots,"suffix")],2),a.$slots.append?(u(),r("span",{key:1,class:o(e(n)("append"))},[v(a.$slots,"append")],2)):i("",!0)],16),b(ne,{name:"fade"},{default:oe(()=>[e(g)?(u(),r("div",{key:0,class:o(e(n)("hint",[e(D)]))},S(e(g)),3)):i("",!0)]),_:1})],64))}}),he=re(me);export{he as Y};
