import{d as H,a0 as j,c as M,i as U,o as L,a as O,F as Q,h as Z,n as g,W as a,v as $,b as R,e as q,N as ee,r as D,S as te,ax as v,a1 as ne,R as ae,ak as le,a2 as A,w as F,f as oe,au as se,x as re}from"./index-f159d33e.js";import{_ as P}from"./index-61e83363.js";const ie=["onClick"],ue=["onClick"],ce=H({inheritAttrs:!1,__name:"slider-marks",props:{modelValue:{default:()=>[]},percentStart:{default:0},percentEnd:{default:0},rangeMin:{default:0},rangeMax:{default:100}},emits:["position"],setup(l,{emit:Y}){const c=j("slider"),e=l,d=Y,y=M(()=>{const B=e.rangeMax-e.rangeMin;return e.modelValue.map(i=>{const o=i.key-e.rangeMin,m=Math.round(o/B*100)||0,s=m/100;return{...i,percent:m,isOver:s===e.percentStart||s===e.percentEnd,isOvered:s>e.percentStart&&s<e.percentEnd,markInfo:i.labelNode||U("span",{style:i.style},i.label)}})});return(B,i)=>(L(),O("div",{class:g(a(c)("marks"))},[(L(!0),O(Q,null,Z(y.value,o=>(L(),O("div",{key:o.key,class:g(a(c)("mark-item",{over:o.isOver,overed:o.isOvered})),style:$({left:o.percent+"%"})},[R("div",{class:g(a(c)("mark-item-pointer")),onClick:m=>d("position",o.percent)},null,10,ie),R("div",{class:g(a(c)("mark-item-box")),onClick:m=>d("position",o.percent)},[(L(),q(ee(o.markInfo)))],10,ue)],6))),128))],2))}}),W=l=>l<=0?0:l>=100?100:l,de=(l,Y,c,e,d,y,B)=>{let i=0,o=null,m=0;const s=D(!0),V=D(!1),u=r=>{te(()=>{let n=Math.round(e.value/c.value*100),t=Math.round(d.value/c.value*100);n=W(n),t=W(t);const k=l.max-l.min,E=k*n/100+l.min,I=k*t/100+l.min,X=y.value?[E,I]:I;B(r,X)})},_=r=>{let n=e.value,t=d.value;if(y.value){if(s.value?(t=r>=i?i:r,t=t<=0?0:t):(n=r>=i?i:r,n=n<=0?0:n),n>=t){const k=n;n=t,t=k,s.value=!s.value}}else t=r>=i?i:r,t=t<=0?0:t;e.value=n,d.value=t,u("update:modelValue")},h=r=>{const n=o;if(l.direction===v[1])if(r.clientX>=n.left&&r.clientX<=n.right){const t=r.clientX-n.left,k=Math.round(t/m)*m;_(k)}else{const t=r.clientX<n.left?-9999:9999;_(t)}else if(l.direction===v[0])if(r.clientY>=n.top&&r.clientY<=n.bottom){const t=n.bottom-r.clientY,k=Math.round(t/m)*m;_(k)}else{const t=r.clientY<n.top?9999:-9999;_(t)}},w=()=>{V.value=!0,i=c.value,window.addEventListener("mousemove",h),window.addEventListener("mouseup",T),o=Y.value.getBoundingClientRect(),(l.direction===v[1]||l.direction===v[0])&&(m=i*l.step/100)},S=()=>{l.disabled||(w(),s.value=!1)},x=()=>{l.disabled||(w(),s.value=!0)},T=()=>{V.value=!1,window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",T),u("change")};return{isEndBtn:s,moving:V,handleStartMouseDown:S,handleEndMouseDown:x,emitValue:u}},ve=H({name:"YkSlider",__name:"slider",props:{modelValue:{default:0},disabled:{type:Boolean,default:!1},min:{default:0},max:{default:100},direction:{default:v[1]},step:{default:1},marks:{default:()=>[]},height:{default:200},showInput:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(l,{emit:Y}){const c=j("slider"),e=l,{modelValue:d,marks:y,min:B,max:i}=ne(e),o=D(),m=Y,s=M(()=>Array.isArray(d.value)),V=M(()=>e.max-e.min),u=D(0),_=()=>{e.direction===v[1]?u.value=o.value?o.value.offsetWidth:0:e.direction===v[0]&&(u.value=o.value?o.value.offsetHeight:0)};ae(()=>{_(),window.addEventListener("resize",_)}),le(()=>{window.removeEventListener("resize",_)});const h=D(0),w=D(0),S=M(()=>{if(s.value){const p=(d.value[0]||0)-e.min;return Math.round(p/V.value*100)/100}else return 0}),x=M(()=>{if(s.value){const p=(d.value[1]||0)-e.min;return Math.round(p/V.value*100)/100}else{const f=d.value;return Math.round(f/V.value*100)/100}}),T=M(()=>s.value?(d.value[0]||0).toString():"0"),r=M(()=>s.value?(d.value[1]||0).toString():d.value.toString()),n=M(()=>e.direction===v[1]?"top":"right"),t=M(()=>e.direction===v[1]?{height:"2px"}:e.direction===v[0]?{height:e.height+"px",width:"2px"}:{}),k=M(()=>e.direction===v[1]?{top:0,height:"2px",left:h.value+"px",width:w.value-h.value+"px"}:e.direction===v[0]?{left:0,width:"2px",bottom:h.value+"px",height:w.value-h.value+"px"}:{}),{moving:E,isEndBtn:I,handleStartMouseDown:X,handleEndMouseDown:G,emitValue:J}=de(e,o,u,h,w,s,m);A(S,()=>{E.value||(h.value=S.value*u.value)},{immediate:!0}),A(x,()=>{E.value||(w.value=x.value*u.value)},{immediate:!0}),A(u,()=>{h.value=S.value*u.value,w.value=x.value*u.value},{immediate:!0});const z=f=>{if(e.disabled)return;let p=f/100;if(s.value){const C=Math.abs(S.value-p),N=Math.abs(x.value-p);C>=N?w.value=p*u.value:h.value=p*u.value}else w.value=p*u.value;J("update:modelValue")},K=f=>{if(e.disabled)return;const C=o.value.getBoundingClientRect();if(e.direction===v[1]){const N=f.clientX-C.left;let b=Math.round(N/u.value*100);b=Math.round(b/e.step)*e.step,z(b)}else if(e.direction===v[0]){const N=u.value-(f.clientY-C.top);let b=Math.round(N/u.value*100);b=Math.round(b/e.step)*e.step,z(b)}};return(f,p)=>(L(),O("div",{class:g(a(c)({withMarks:!!a(y).length,disabled:f.disabled},[f.direction]))},[R("div",{ref_key:"runwayRef",ref:o,class:g(a(c)("runway")),style:$(t.value),onClick:K},[R("div",{class:g(a(c)("bar")),style:$(k.value)},[s.value?(L(),q(a(P),{key:0,class:g(a(c)("button",{start:!0})),placement:n.value,open:a(E)&&!a(I),trigger:"hover",title:T.value,onMousedown:a(X)},{default:F(()=>[R("div",{class:g(a(c)("tooltipSpan"))},null,2)]),_:1},8,["class","placement","open","title","onMousedown"])):oe("",!0),U(a(P),{class:g(a(c)("button",{end:!0})),placement:n.value,open:a(E)&&a(I),trigger:"hover",title:r.value,onMousedown:a(G)},{default:F(()=>[R("div",{class:g(a(c)("tooltipSpan"))},null,2)]),_:1},8,["class","placement","open","title","onMousedown"])],6)],6),U(ce,{modelValue:a(y),"onUpdate:modelValue":p[0]||(p[0]=C=>se(y)?y.value=C:null),"range-min":a(B),"range-max":a(i),"percent-start":S.value,"percent-end":x.value,onPosition:z},null,8,["modelValue","range-min","range-max","percent-start","percent-end"])],2))}}),me=re(ve),he=me;export{me as Y,he as _};
